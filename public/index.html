<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="style.css">
        <title>TicTacToe</title>
    </head>
    <body>
        <div id="field">
        </div>

        <p id="wonMassage" , style="font-size: 30pt"></p>

        <script>

            let player = "1";

            document.getElementById("field").innerHTML = `
                <button id="button1", onclick="start('button1')">_</button>|<button id="button2", onclick="start('button2')">_</button>|<button id="button3", onclick="start('button3')">_</button><br>
                <button id="button4", onclick="start('button4')">_</button>|<button id="button5", onclick="start('button5')">_</button>|<button id="button6", onclick="start('button6')">_</button><br>
                <button id="button7", onclick="start('button7')"></button>|<button id="button8", onclick="start('button8')"></button>|<button id="button9", onclick="start('button9')"></button>
            `;

            function start(buttonId) {
                if (player == "1") {
                    if (document.getElementById(buttonId).textContent != "o") {
                        button(buttonId, "x");
                        player = "2";
                        check("1");
                    }
                } else if (player == "2") {
                    if (document.getElementById(buttonId).textContent != "x") {
                        button(buttonId, "o");
                        player = "1";
                        check("2");
                    }
                }
            }
                
            function button(button, mark) {
                document.getElementById(button).textContent = mark;
            }

            function check(player) {
                let mark = "";
                let win = `Spieler ${player} hat gewonnen!`;
                let won = false;

                switch(player) {
                    case "1":
                    mark = "x";
                    break;

                    case "2":
                    mark = "o";
                    break;
                }

                let first = document.getElementById("button1").textContent;
                let second = document.getElementById("button2").textContent;
                let third = document.getElementById("button3").textContent;
                let forth = document.getElementById("button4").textContent;
                let fifth = document.getElementById("button5").textContent;
                let sixth = document.getElementById("button6").textContent;
                let seventh = document.getElementById("button7").textContent;
                let eighth = document.getElementById("button8").textContent;
                let ninth = document.getElementById("button9").textContent;

                if (first == mark && second == mark && third == mark) {
                    won = true;
                } else if (forth == mark && fifth == mark && sixth == mark) {
                    won = true;
                } else if (seventh == mark && eighth == mark && ninth == mark) {
                    won = true;

                } else if (first == mark && forth == mark && seventh == mark) {
                    won = true;
                } else if (second == mark && fifth == mark && eighth == mark) {
                    won = true;
                } else if (third == mark && sixth == mark && ninth == mark) {
                    won = true;

                } else if (first == mark && fifth == mark && ninth == mark) {
                    won = true;
                } else if (third == mark && fifth == mark && seventh == mark) {
                    won = true;
                }

                if (won) {
                    document.getElementById("wonMassage").textContent = win
                }
            }

    /**function player1() {
                when(readLine()) {
                    "1" -> first = "x"
                    "2" -> second = "x"
                    "3" -> third = "x"
                    "4" -> forth = "x"
                    "5" -> fifth = "x"
                    "6" -> sixth = "x"
                    "7" -> seventh = "x"
                    "8" -> eighth = "x"
                    "9" -> ninth = "x"
            else -> {
                        println("Gib eine Zahl zwischen 1 und 9 ein!")
                player1()
                    }
                }
                //println("${ESC}cs")
                println("""
       _$first | _$second | _$third
       _$forth | _$fifth | _$sixth
         $seventh | $eighth | $ninth
    
    """)
        val won = check("1")
        if (!won) {
                    player2()
                }
            }**/

    /**private fun player2() {
                println(">>")
                when(readLine()) {
                    "1" -> first = "o"
                    "2" -> second = "o"
                    "3" -> third = "o"
                    "4" -> forth = "o"
                    "5" -> fifth = "o"
                    "6" -> sixth = "o"
                    "7" -> seventh = "o"
                    "8" -> eighth = "o"
                    "9" -> ninth = "o"
            else -> {
                        println("Gib eine Zahl zwischen 1 und 9 ein!")
                player2()
                    }
                }
                println("""
       _$first | _$second | _$third
       _$forth | _$fifth | _$sixth
         $seventh | $eighth | $ninth
    
    """)
        val won = check("2")
        if (!won) {
                    player2()
                }
                player1()
            }**/
    
    
    </script>
    </body>
</html>